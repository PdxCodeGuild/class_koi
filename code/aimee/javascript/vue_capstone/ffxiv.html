<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SourceBook</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Koulen&family=Press+Start+2P&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400;1,600;1,700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            background-color: #235C8E;
        }

        .info {
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            border: 2px #A0A0A0;
            border-radius: 20px;
            padding: 2rem;
        }

        h1 {
            color: #C8F5FF;
            font-family: 'Koulen';
            font-size: 5rem;
            margin-top: -2rem;
            margin-bottom: -2rem;
            text-shadow: 2px 2px 10px #A0A0A0;
        }

        h3 {
            font-family: 'Source Sans Pro';
            color: #fff;
            font-weight: 400;
            font-style: italic;
        }

        label {
            font-family: 'Source Sans Pro';
            color: #fff;
            padding-right: 1rem;
        }

        input {
            font-family: 'Source Sans Pro';
        }

        p {
            font-family: 'Source Sans Pro';
            color: #C8F5FF;
        }

        .character-results {
            font-family: 'Source Sans Pro';
            color: #C8F5FF;
        }
    </style>
</head>

<body>
    <div id="app">
        <h1>FFXIV Character Info</h1>
        <h3>look up character data</h3>

        <!-- search for a character by name -->
        <label for="name">Search by name:</label>
        <input type="text" id="name" v-model="name">
        <input type="submit" value="search" @click="searchName"></input><br>

        <label for="fc">Search by FC:</label>
        <input type="text" id="fc" v-model="fcname">
        <input type="submit" value="search" @click="searchFC"></input><br>

        <div class="info">
            <p v-for="result in results">{{ result.Name }}, {{ result.Server }}<br>
                Lodestone ID: {{ result.ID }} <br><br>
                <a href="https://na.finalfantasyxiv.com/lodestone/character/${result.ID}/"><img
                        v-bind:src="result.Avatar"></a><br>
                <input type="submit" value="more info" @click="displayCharacter">
                <div v-for="char in character" class="character-results">
                    Part of {{ char.FreeCompanyName }} Free Company on {{ char.DC }} <br>
                    Nameday: {{ char.Nameday }}<br>
                    <img v-bind:src="char.Portrait">
                    <ul>
                        <li>{{ char.ClassJobs }}</li>
                    </ul>
                </div>
            </p>
            <div v-for="char in character" class="character-results">
                Part of {{ char.FreeCompanyName }} Free Company on {{ char.DC }} <br>
                Nameday: {{ char.Nameday }}<br>
                <img v-bind:src="char.Portrait">
                <ul>
                    <li>{{ char.ClassJobs }}</li>
                </ul>
            </div>
        </div>
        
        
    </div>

    <script>
        const App = {
            data() {
                return {
                    baseUrl: 'https://xivapi.com/',
                    name: '',
                    fcname: '',
                    character: '',
                    avatar: '',
                    results: [],
                    ID: '', // this needs to be each individual character's id
                    character: [],
                }
            },
            // created() {
            //     this.searchName()
            // },
            methods: {
                searchName() {
                    axios({
                        url: 'https://xivapi.com/character/search',
                        headers: { Accept: 'application/json', private_key: '0d86bbfc3e384fbd8e154e5c23d06d2231cde9d7af75449b92cf531a92c080e1' },
                        method: 'get',
                        params: { name: this.name }
                    }).then(res => {
                        console.log(res.data)
                        this.results = res.data.Results
                    }).catch(error => console.log(error.message))
                },
                searchFC() {
                    axios({
                        url: 'https://xivapi.com/freecompany/search',
                        headers: { Accept: 'application/json', private_key: '0d86bbfc3e384fbd8e154e5c23d06d2231cde9d7af75449b92cf531a92c080e1' },
                        method: 'get',
                        params: { name: this.fcname }
                    }).then(res => {
                        console.log(res.data)
                        this.results = res.data.Results
                    }).catch(error => console.log(error.message))
                },
                displayCharacter() {
                    axios({
                        url: 'https://xivapi.com/character/8413258',
                        headers: { Accept: 'application/json', private_key: '0d86bbfc3e384fbd8e154e5c23d06d2231cde9d7af75449b92cf531a92c080e1' },
                        method: 'get',
                        params: { lodestone_id: this.ID }
                    }).then(res => {
                        console.log(res.data)
                        this.results = res.data.Character
                    }).catch(error => console.log(error.message))
                }
            }
        }
        const app = Vue.createApp(App)
        app.mount('#app')
    </script>
</body>

</html>