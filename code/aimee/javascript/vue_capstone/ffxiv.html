<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SourceBook</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Koulen&family=Press+Start+2P&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400;1,600;1,700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <style>
        * {
            margin: auto;
            max-height: 60rem;
        }
        body {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            background-color: #FFFBFC;
            max-width: 60rem;
            max-height: 70rem;
            justify-content: center;
        }
        .header {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .info {
            border: 2px 2px #A0A0A0;
            border-radius: 20px;
            padding: 1rem;
            text-align: center;
        }
        .display-row {
            font-family: 'Source Sans Pro';
            color: #C8F5FF;
            display: flex;
            flex-direction: column;
            border: 1px solid #2660A4;
            border-radius: 30px;
            box-shadow: 4px 4px 4px rgb(11, 70, 110);
            margin: 1rem;
            background-color: #56CBF9;
            justify-content: center;
            overflow: scroll;
        }

        input {
            color: #2660A4;
        }

        h1 {
            color: #FF729F;
            font-family: 'Koulen';
            font-size: 5rem;
            margin-top: -2rem;
            margin-bottom: -2rem;
            text-shadow: 2px 2px 10px #A0A0A0;
        }

        h2 {
            font-family: 'Koulen';
            color: #235C8E;
        }

        h3 {
            font-family: 'Source Sans Pro';
            color: #2660A4;
            font-weight: 400;
            font-style: italic;
            padding: 1rem;
        }

        label {
            font-family: 'Source Sans Pro';
            color: #FF729F;
            padding-right: 1rem;
            
        }

        input {
            font-family: 'Source Sans Pro';
        }

        p {
            font-family: 'Source Sans Pro';
            color: #000;
        }

        .character-results {
            font-family: 'Source Sans Pro';
            color: #C8F5FF;
            display: flex;
            flex-direction: row;
            border: 1px solid #2660A4;
            border-radius: 30px;
            box-shadow: 4px 4px 4px rgb(11, 70, 110);
            margin: 1rem;
            background-color: #56CBF9;
            overflow: scroll;
        }
        .fc-results {
            font-family: 'Source Sans Pro';
            color: #C8F5FF;
            display: flex;
            flex-direction: row;
            border: 1px solid #2660A4;
            border-radius: 30px;
            box-shadow: 4px 4px 4px rgb(11, 70, 110);
            margin: 1rem;
            background-color: #56CBF9;
            overflow: scroll;
        }
        .image {
            width: 50%;
        }

        .text-info {
            width: 50%;
            text-align: right;
        }
        img.portrait {
            width: 70%;
            padding:1rem;
            align-self: center;
        }
        img.avatar {
            box-shadow: 2px 2px 2px rgb(11, 70, 110);
        }
        hr {
            margin: 1rem;
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="header">
        <h1>FFXIV Character Info</h1>
        <h3>look up character data</h3>

        <input type="text" id="name" v-model="name" placeholder="search by name">
        <input type="submit" value="search" @click="searchName"></input><br>

        <input type="text" id="info" v-model="ID" placeholder="search by Lodestone ID">
        <input type="submit" value="search" @click="displayCharacter"><br>

        <input type="text" id="fc" v-model="fcname" placeholder="search by FC">
        <input type="submit" value="search" @click="searchFC"></input><br>

        <input type="text" id="fcinfo" v-model="FCID" placeholder="search by FC ID">
        <input type="submit" value="search" @click="displayFC"><br>
        </div>

        <hr>

        <!-- general FC and character search  -->
        <div class="display-row">
            <p v-for="result in results" class="info">{{ result.Name }}, {{ result.Server }}<br>
                Lodestone ID: {{ result.ID }} <br><br>
                <a href="https://na.finalfantasyxiv.com/lodestone/character/`${result.ID}`"><img
                        v-bind:src="result.Avatar" class="avatar"></a><br>
                <input type="submit" value="more info" @click="`https://xivapi.com/character/${characterID}`">
                <!-- <img v-bind:src="result.Crest[2]"> -->
            </p>
        </div>

        <!-- detailed character/fc information - needs to be invisible till searched for -->
        <div v-bind="character" class="character-results">
            <div class="text-info">
                <h2>{{character.Name}}</h2><br>
                <p>FC: {{ character.FreeCompanyName }} on {{ character.DC }} Data Center</p>
                <p>Nameday: {{ character.Nameday }}</p>
            </div>
            <div class="image">
                <img class="portrait" v-bind:src="character.Portrait">
            </div>
        </div>

        <!-- detailed FC information -->
        <div v-bind="freecompany" class="fc-results">
            <div class="text-info">
                <h2>{{ freecompany.Name }}</h2>
                <p>{{ freecompany.Tag }}</p>

            </div>
            <!-- <img class="portrait" v-bind:src="freecompany.Crest[2]"> -->
            
            <div class="members-list">
            <p v-for="member in freecompany.FCM">
                {{ member.Name }}
            </p>
            </div>
        </div>

    </div>

    <script>
        const App = {
            data() {
                return {
                    baseUrl: 'https://xivapi.com/',
                    name: '',
                    fcname: '',
                    character: '',
                    avatar: '',
                    crest: '',
                    results: [],
                    FCID: '',
                    freecompany: '',
                    freecompanymembers: '',
                    ID: '', // this needs to be each individual character's id
                    characterID: '',
                    character: '',
                    output: '',
                    char: '',
                    FCM: '',
                }
            },
            methods: {
                searchName() {
                    axios({
                        url: 'https://xivapi.com/character/search',
                        headers: { Accept: 'application/json', private_key: '0d86bbfc3e384fbd8e154e5c23d06d2231cde9d7af75449b92cf531a92c080e1' },
                        method: 'get',
                        params: { name: this.name }
                    }).then(res => {
                        console.log(res.data)
                        this.results = res.data.Results
                    }).catch(error => console.log(error.message))
                },
                searchFC() {
                    axios({
                        url: 'https://xivapi.com/freecompany/search',
                        headers: { Accept: 'application/json', private_key: '0d86bbfc3e384fbd8e154e5c23d06d2231cde9d7af75449b92cf531a92c080e1' },
                        method: 'get',
                        params: { name: this.fcname }
                    }).then(res => {
                        console.log(res.data)
                        this.results = res.data.Results
                    }).catch(error => console.log(error.message))
                },
                displayCharacter(characterID) {
                    axios({
                        url: `https://xivapi.com/character/${characterID}`,
                        headers: { Accept: 'application/json', private_key: '0d86bbfc3e384fbd8e154e5c23d06d2231cde9d7af75449b92cf531a92c080e1' },
                        method: 'get',
                        // 8413258 is an example ID
                    }).then(res => {
                        console.log(res.data)
                        this.character = res.data.Character
                    }).catch(error => console.log(error.message))
                },
                displayFC() {
                    axios({
                        url: 'https://xivapi.com/freecompany/9228297848947338844?data=FCM',
                        headers: { Accept: 'application/json', private_key: '0d86bbfc3e384fbd8e154e5c23d06d2231cde9d7af75449b92cf531a92c080e1' },
                        method: 'get',
                        params: { data: this.FCM }
                    }).then(res => {
                        console.log(res.data)
                        this.freecompany = res.data.FreeCompany
                    }).catch(error => console.log(error.message))
                }
            }
        }
        const app = Vue.createApp(App)
        app.mount('#app')
    </script>
</body>

</html>